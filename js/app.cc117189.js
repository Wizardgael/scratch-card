(function(){"use strict";var t={7392:function(t,e,i){var n=i(9242),s=i(3396),o=i(7139);const r={class:"card"},c=["src"],a={class:"hidder"},h=["src","onLoad"],l={class:"hidder-2"},u=["src","onLoad"];function d(t,e,n,d,p,f){const v=(0,s.up)("vue-scratchable");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("img",{src:i(2865)},null,8,c),(0,s._)("div",a,[(0,s.Wm)(v,{brushOptions:p.brush,hideOptions:p.hide,onClick:()=>{p.startConfetti(),f.clickOn1()},onRelease:p.stopConfetti},{default:(0,s.w5)((({init:t})=>[(0,s._)("img",{src:i(5917),onLoad:t},null,40,h)])),_:1},8,["brushOptions","hideOptions","onClick","onRelease"]),(0,s._)("div",{class:"text",style:(0,o.j5)(f.hidder1)},"Grattez ici",4)]),(0,s._)("div",l,[(0,s.Wm)(v,{brushOptions:p.brush,hideOptions:p.hide,onClick:()=>{p.startConfetti(),f.clickOn2()},onRelease:p.stopConfetti},{default:(0,s.w5)((({init:t})=>[(0,s._)("img",{src:i(5917),onLoad:t},null,40,u)])),_:1},8,["brushOptions","hideOptions","onClick","onRelease"]),(0,s._)("div",{class:"text",style:(0,o.j5)(f.hidder2)},"Grattez ici",4)])])}const p={class:"vue-scratchable-wrapper"};function f(t,e,i,n,o,r){return(0,s.wg)(),(0,s.iD)("div",p,[(0,s.WI)(t.$slots,"default",{init:r.init},void 0,!0),(0,s._)("canvas",{onMousedown:e[0]||(e[0]=(...t)=>r.mouseDown&&r.mouseDown(...t)),onMousemove:e[1]||(e[1]=(...t)=>r.mouseMove&&r.mouseMove(...t)),onTouchstart:e[2]||(e[2]=(...t)=>r.touchDown&&r.touchDown(...t)),onTouchmove:e[3]||(e[3]=(...t)=>r.touchMove&&r.touchMove(...t))},null,32)])}var v=i(3738),g=i.n(v),m={name:"VueScratchable",props:{brushOptions:{type:Object,default:()=>({size:20,shape:"round"})},hideOptions:{type:Object,default:()=>({type:"color",value:"#dadada"})},getPercentageCleared:{type:Boolean,default:!1},percentageStride:{type:Number,default:150},onClick:{type:Function,default:()=>{}},onRelease:{type:Function,default:()=>{}}},data(){return{canvas:null,context:null,isPressed:!1,offset:{top:0,left:0},position:{currX:0,currY:0,lastX:0,lastY:0},observer:null,initFlag:!1}},mounted(){this.canvas=this.$el.querySelector("canvas");const t=g()((()=>this.init()),200);this.observer=new MutationObserver((e=>{e.forEach((({attributeName:e})=>{!this.initFlag&&e&&t()}))})),this.observer.observe(this.$el,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),window.addEventListener("mouseup",this.mouseUp,!1),window.addEventListener("touchend",this.touchUp,!1),window.addEventListener("touchcancel",this.touchUp,!1),this.init(),window.addEventListener("resize",g()(this.init,500))},unmounted(){window.removeEventListener("mouseup",this.mouseUp),window.removeEventListener("touchend",this.touchUp),window.removeEventListener("touchcancel",this.touchUp),window.removeEventListener("resize",g()(this.init,500)),this.observer.disconnect()},methods:{init(){this.initFlag=!0,this.setCanvasSizeAndContext(),this.$nextTick((()=>this.fillArea()))},setCanvasSizeAndContext(){this.$nextTick((()=>{const{width:t,height:e}=this.$el.getBoundingClientRect();this.canvas.width=Math.ceil(t),this.canvas.height=Math.ceil(e),this.context=this.canvas.getContext("2d")}))},setOffsets(){const{top:t,left:e}=this.canvas.getBoundingClientRect();this.offset.top=t+document.body.scrollTop,this.offset.left=e+document.body.scrollLeft},async fillArea(){const{width:t,height:e}=this.context.canvas;await this.setFillStyle().catch((t=>{console.error(` Failed to load image!\n              Error: ${t.name}\n              Message: ${t.message}\n            `)})),this.context.fillRect(0,0,t,e),this.initFlag=!1},setFillStyle(){const{type:t,value:e="",src:i="",repeat:n=""}=this.hideOptions;return this.context.globalCompositeOperation="source-over",new Promise("color"===t?t=>t(this.context.fillStyle=e):(t,e)=>{const s=new Image;s.onload=()=>{this.context.fillStyle=this.context.createPattern(s,n),t(s)},s.onerror=t=>e(t),s.src=i})},clearArea(){const{width:t,height:e}=this.context.canvas;this.context.globalCompositeOperation="destination-out",this.context.fillRect(0,0,t,e)},draw(){const{currX:t,currY:e,lastX:i,lastY:n}=this.position;this.context.beginPath(),this.context.globalCompositeOperation="destination-out",this.context.lineWidth=this.brushOptions.size,this.context.lineJoin=this.brushOptions.shape,this.context.moveTo(i,n),this.isPressed?this.context.lineTo(t,e):this.context.lineTo(t+.01,e+.01),this.context.closePath(),this.context.stroke(),this.lastPositionHelper(t,e),this.calculateClearedArea()},lastPositionHelper(t,e){this.position.lastX=t,this.position.lastY=e},currentPositionHelper(t,e){this.position.currX=t-this.offset.left,this.position.currY=e-this.offset.top},mouseDown({clientX:t,clientY:e}){this.setOffsets(),this.currentPositionHelper(t,e),this.lastPositionHelper(this.position.currX,this.position.currY),this.draw(),this.isPressed=!0,this.onClick()},mouseMove({clientX:t,clientY:e}){this.isPressed&&(this.currentPositionHelper(t,e),this.draw())},mouseUp(){this.onRelease(),this.isPressed=!1},touchDown({targetTouches:[{clientX:t,clientY:e}]}){this.setOffsets(),this.currentPositionHelper(t,e),this.lastPositionHelper(this.position.currX,this.position.currY),this.draw(),this.isPressed=!0,this.onClick()},touchMove(t){t.preventDefault();const{targetTouches:[{clientX:e,clientY:i}]}=t;this.currentPositionHelper(e,i),this.draw()},touchUp(){this.isPressed=!1,this.onRelease()},calculateClearedArea(){if(!this.getPercentageCleared)return;const{width:t,height:e}=this.context.canvas,{data:i,data:{length:n}}=this.context.getImageData(0,0,t,e),s=n/this.percentageStride;let o=0;for(let r=o;r<n;r+=this.percentageStride)0===parseInt(i[r],10)&&(o+=1);this.$emit("percentage-update",Math.round(o/s*100))}}},w=i(89);const b=(0,w.Z)(m,[["render",f],["__scopeId","data-v-c9cd8492"]]);var x=b;x.__defaults;var O={components:{VueScratchable:x},data(){let t=!1;const e=()=>{t||(this.$confetti.start(),this.$confetti.update({defaultColors:["gold","orange"]}),t=!0,console.log("start"))},i=()=>{setTimeout((()=>{this.$confetti.stop(),t=!1,console.log("stop")}),200)};return{haveCliked1:!1,haveCliked2:!1,startConfetti:e,stopConfetti:i,percentage:0,hide:{type:"color",value:"#000"},brush:{size:60,shape:"round"}}},computed:{hidder1(){return"display: "+(this.haveCliked1?"none":"flex")},hidder2(){return"display: "+(this.haveCliked2?"none":"flex")}},methods:{clickOn1(){this.haveCliked1=!0},clickOn2(){this.haveCliked2=!0}}};const C=(0,w.Z)(O,[["render",d]]);var y=C,k=i(4303),P=i.n(k);const _=(0,n.ri)(y);_.use(P()),_.mount("#app")},5917:function(t,e,i){t.exports=i.p+"img/bg.c64d5d64.jpg"},2865:function(t,e,i){t.exports=i.p+"img/bg2.d670f7b3.jpg"}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,i),o.exports}i.m=t,function(){var t=[];i.O=function(e,n,s,o){if(!n){var r=1/0;for(l=0;l<t.length;l++){n=t[l][0],s=t[l][1],o=t[l][2];for(var c=!0,a=0;a<n.length;a++)(!1&o||r>=o)&&Object.keys(i.O).every((function(t){return i.O[t](n[a])}))?n.splice(a--,1):(c=!1,o<r&&(r=o));if(c){t.splice(l--,1);var h=s();void 0!==h&&(e=h)}}return e}o=o||0;for(var l=t.length;l>0&&t[l-1][2]>o;l--)t[l]=t[l-1];t[l]=[n,s,o]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.p="/scratch-card/"}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,o,r=n[0],c=n[1],a=n[2],h=0;if(r.some((function(e){return 0!==t[e]}))){for(s in c)i.o(c,s)&&(i.m[s]=c[s]);if(a)var l=a(i)}for(e&&e(n);h<r.length;h++)o=r[h],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(l)},n=self["webpackChunkscratch_card"]=self["webpackChunkscratch_card"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(7392)}));n=i.O(n)})();
//# sourceMappingURL=app.cc117189.js.map